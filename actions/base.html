<html>
<head>
  <title>Reeze :: Main page</title>
</head>
<body>

<div id="date_holder"></div>

{%- macro render_item(item) %}
  <a href="{{ item.url }}" target="_blank">{{ item.title }}</a><br>
{%- endmacro %}

{% macro render_backend(backend) %}
  <h2>{{ backend.__class__.__name__ }}</h2>
  {%- for item in backend.get_items() -%}
    {{ render_item(item) }}
  {%- endfor -%}
{% endmacro %}

{%- for backend in backends %}
  {{ render_backend(backend) }}
{%- endfor %}

<script type="text/javascript">
  (function () {
    var d = new Date(),
        e = document.getElementById('date_holder');

    e.innerText = 'Last updated: ' + d.toString();
    setTimeout('window.location.reload()', 1000 * 60 * 60);
  }())
</script>

</body>
</html>
